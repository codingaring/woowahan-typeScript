# 2.1 타입이란

## 1) 자료형으로서의 타입

- 변수에 값을 할당하기 전, 컴퓨터 메모리 공간을 효율적으로 사용하기 위해 타입을 참조한다.

> 자바스크립트의 7가지 타입

- undefined
- null
- Boolean
- String
- Symbol
- Numeric(Number와 BigInt)
- Object

- 데이터 타입은 여러 종류의 데이터를 식별하는 분류 체계로 컴파일러에 값의 형태를 알려준다.
- 메모리에 저장된 값을 데이터 타입으로 설명할 수 있으며, 모든 데이터를 해석할 때 데이터 타입 체계가 사용된다.

## 2) 집합으로서의 타입

| 프로그래밍에서의 타입은 수학의 집합과 유사하다. 타입은 값이 가질 수 있는 유효한 범위의 집합을 말한다.

```ts
const num: number = 123;
const str: string = "abc";

function func(n: number) {
  // ...
}

func(num);
func(str); // Argument of type 'string' is not assignable to parameter of type 'number'
```

- 타입 시스템은 코드에서 사용되는 유효한 값의 범위를 제한해서 런타임에 발생할 수 있는 유효하지 않은 값에 대한 에러를 방지해준다.

- 일단 타입을 제한하면 타입스크립트 컴파일러는 함수를 호출할 때 호환되는 인자로 호출했는지를 판단한다.

## 3) 정적 타입과 동적 타입

- 타입을 결정하는 시점에 따라 타입을 정적 타입(static type)과 동적 타입(dynamic type)으로 분류할 수 있다.

### 3-1) 정적타입 Static Type

- 모든 변수의 타입이 컴파일타임에 결정된다.
- 코드 수준에서 개발자가 타입을 명시해줘야 하는 자바, C, 타입스크립트 등이 정적 타입 언어에 속한다.
- 타입 에러를 컴파일 단계에서부터 발견할 수 있기 때문에 안정성을 보장할 수 있다.

### 3-2) 동적 타입 Dynamic Type

- 변수 타입이 런타임에 결정된다.
- 파이썬, 자바스크립트가 대표적인 동적 타입 언어로 개발자는 직접 타입을 정의해줄 필요가 없다.
- 프로그램을 실행할 때 타입 에러가 발견되기 때문에 개발 과정에서 에러 없이 마음껏 코드를 작성할 수 있지만 언제 프로그램에 오류가 생길지 모르는 불안감에 휩싸일 수 있다.

> #### 컴파일타임과 런타임
>
> 소스코드 실행 과정 중 컴파일 타임은 소스코드를 기계어로 변환하는 시점이고, 이후 변환된 파일이 메모리에 적재되어 실행되는 시점을 런타임이라고 한다.

## 4) 강타입과 약타입

### 암묵적 타입 변환(Implicit coercion/conversion)

> 암묵적 형변환이라고도 함

### 4-1) 강타입 (strongly type)

- 서로 다른 타입을 갖는 값끼리 연산을 시도하면 컴파일 또는 인터프리터에서 에러가 발생한다.
- 파이썬, 루비, 타입스크립트

### 4-2) 약타입 (weakly type)

- 서로 다른 타입을 갖는 값끼리 연산할 때 컴파일러 또는 인터프리터가 내부적으로 판단해서 특정 값의 타입을 변환하여 연산을 수행한 후 값을 도출한다.
- C++, 자바, 자바스크립트

= 타입 스크립트는 명시적 타입 시스템의 특징과 추론형 타입 시스템의 특징을 모두 가지고 있다.

## 5) 컴파일 방식

> 컴파일은 사람이 이해할 수 있는 방식으로 작성한 코드를 컴퓨터가 이해할 수 있는 기계어로 바꿔주는 과정을 말한다.

- 컴파일은 방식과 형태의 차이는 있지만, 고수준-저수준 간의 코드 변환을 의미한다.
- 하지만 타입스크립트의 컴파일 결과는 여전히 고수준의 자바스크립트 파일이다.
- 자바스크립트에 타입스크립트라는 레이어를 끼얹은 일종의 템플릿 언어 또는 확장 언어로 해석하는 의견도 있다.

# 2.2 타입스크립트의 타입 시스템

## 1) 타입 애너테이션 방식 (type annotation)

> 변수나 상수 혹은 함수의 인자와 반환 값에 명시적으로 선언해서, 어떤 타입 값이 저장될 것인지를 컴파일러에 직접 알려주는 문법이다.

- 타입스크립트는 `: type` 구문을 붙여 데이터 타입을 명시해준다.

```ts
    const isDone:boolean = false;
    const decimal : number = 6;
    const color:string: = "blue";
    let x : [string, number]; // tuple
```

## 2) 구조적 타이핑

- 타입을 사용하는 여러 프로그래밍 언어에서 값이나 객체는 하나의 구체적인 타입을 가지고 있다.
- 타입은 이름으로 구분되며, 컴파일 타임 이후에도 남아있다.

  - 이것을 명목적으로 "구체화한 타입 시스템" 이라고 부르기도 한다.

- 타입스크림트는 구조로 타입을 구분한다.
  => 이것을 구조적 타이핑이라고 한다.

## 3) 구조적 서브 타이핑

집합으로 나타낼 수 있는 타입스크립트의 타입 시스템을 지탱하고 있는 개념이 바로 구조적 서브 타이핑이다.

- 객체가 가지고 있는 속성(프로퍼티)을 바탕으로 타입을 구분하는 것이다.
- 이름이 다른 객체라도 속성이 동일하다면, 타입스크립트는 서로 호환이 가능한 동일한 타입으로 여긴다.

```ts
interface Pet {
  name: string;
}

interface Cat {
  name: string;
  age: number;
}

let pet: Pet;
let cat: Cat = { name: "Zag", age: 2 };

pet = cat;
```

= 서로 다른 타입 간의 호환성은 오로지 타입 내부의 구조에 의해 결정된다.

- 타입 A가 타입 B의 서브 타입이라면 A 타입의 인스턴스는 B 타입이 필요한 곳에 언제든지 위치할 수 있다. 즉, 타입이 계층 구조로부터 자유롭다

## 4) 자바스크립트를 닮은 타입스크립트

: 명목적 타이핑과 구조적 타이핑은 대조되는 개념이다.

- 명목적 타이핑은 구조가 같더라도 이름이 다르면 다른 타입으로 취급한다.(조금 더 엄격하기 때문에 안전하다고 할 수 있다.)

### 덕타이핑 (duck typing)

> 어떤 함수의 매개변숫값이 올바르게 주어진다면 그 값이 어떻게 만들어졌는지 신경 쓰지 않고 사용한다는 개념이다.

- 덕 타이핑과 구조적 타이핑의 차이는 타입을 검사하는 시점에 있다.
  - 자바스크립트의 덕 타이핑은 런타임에 타입을 검사한다.
  - 구조적 타이핑은 컴파일타임에 타입체커가 타입을 검사한다.

## 5) 구조적 타이핑의 결과

```ts
interface Cube {
  width: number;
  height: number;
  depth: number;
}

function addLines(c: Cube) {
  let total = 0;

  for (const axis of Object.keys(c)) {
    // Element implicitly has an 'any' type
    // because expression of type 'string' can't be used to index type 'Cube'
    // No index signature with a parameter of type 'string'
    // was found on type 'Cube'

    const length = c[axis];

    total += length;
  }
}
```

- c 타입에 들어올 수 있는 객체는 어떤 속성이든 가질 수 있기 때문에 string일 수도 있다는 에러가 발생한다.
- 이러한 한계를 극복하기 위해서 유니온(Discriminated Unions) 같은 방법이 생겨났다.

## 6) 타입스크립트의 점진적 타입 확인

- 타입을 생략하면 동적으로 검사를 수행하여 암시적 타입 변환이 일어난다.

## 7) 자바스크립트의 슈퍼셋으로서의 타입스크립트

## 8) 값 vs 타입

- 값은 프로그램이 처리하기 위해 메모리에 저장하는 모든 데이터다.
  - 문자열, 숫자, 변수, 매개변수, 객체 등
- 값 공간과 타입 공간의 이름은 서로 충돌하지 않기 때문에 타입과 변수를 같은 이름으로 정의해도 충돌하지 않는다..
  - type으로 선언한 내용은 자바스크립트 런타임에서 제거되기 때문

### 클래스

- 클래스는 값과 타입 공간 모두에 포함될 수 있다.
- 클래스는 인스턴스를 더욱 쉽게 생성하기 위한 문법 기능으로 실제 동작은 함수와 같다.
- 동시에 클래스는 타입으로도 사용된다.

### enum

- 런타임에 객체로 변환되는 값, 런타임에 실제 객체로 존재하며, 함수로 표현할 수도 있다.

## 9) 타입을 확인하는 방법

### typeof

- 값 공간과 타입 공간이 별도로 존재하는데, typeof 연산자도 어떤 공간에서 쓰이는지에 따라서 역할이 달라진다.
- 값에서 사용된 typeof는 자바스크립트 런타임의 typeof 연산자가 된다.
- 타입에서 사용된 typeof는 값을 읽고 타입스크립트 타입을 반환한다.

### instanceof

- 연산자를 사용하면 프로토타입 체이닝 어딘가에 생성자 프로토타입 속성이 존재하는지 판단할 수 있다.
- typeof 연산자처럼 instanceof 연산자의 필터링으로 타입이 보장된 상태에서 안전하게 값의 타입을 정제하여 사용할 수 있다.

```ts
let error = unknown;

if (error instanceof Error) {
  showAlertModal(error.message);
} else {
  throw Error(error);
}
```

### 타입 단언

`as` 키워드를 사용해 타입 단언을 할 수 있다.

# 2.3. 원시 타입

- boolean
- undefined
- null
- number
- bigInt
- string
- symbol

# 2.4 객체 타입

- object
  : 원시 타입이 아닌 나머지 타입을 포함, 정적 타이핑의 의미가 퇴색된다.
- array

## 3) type과 interface 키워드

## 4) function

> #### 호출 시그니처
>
> 타입스크립트에서 함수 타입을 정의할 때 사용하는 문법이다. 함수 타입은 해당 함수가 받는 매개 변수와 반환하는 값의 타입으로 결정된다.
> 호출 시그니처는 이러한 함수의 매개변수와 반환 값의 타입을 명시하는 역할을 한다.

```ts
type add = (a: number, b: number) => number;
```
