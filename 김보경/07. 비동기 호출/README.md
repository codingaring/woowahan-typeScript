# 7ì¥ ë¹„ë™ê¸° í˜¸ì¶œ

> ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ë‹¤ë£° ë•ŒëŠ” ë‹¤ìŒê³¼ê°™ì€ ì‚¬í•­ì„ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤.
>
> - í˜„ì¬ ë¹„ë™ê¸° ë™ì‘ì´ ì–´ë–¤ ìƒíƒœì¸ê°€?
> - ë¹„ë™ê¸° ë™ì‘ì„ ìœ„í•´ í•„ìš”í•œ ì •ë³´ê°€ ë¬´ì—‡ì¸ê°€?
> - ìš”ì²­ì´ ì„±ê³µí–ˆë‹¤ë©´ ì‹¤íŒ¨ì— ëŒ€í•œ ì •ë³´ë¥¼ ì–´ë–»ê²Œ í™•ì¸í•  ê²ƒì¸ê°€?
> - ìš”ì²­ì´ ì‹¤íŒ¨í–ˆë‹¤ë©´ ì‹¤íŒ¨ì— ëŒ€í•œ ì •ë³´ë¥¼ ì–´ë–»ê²Œ í™•ì¸í•  ê²ƒì¸ê°€?
> - ë¹„ë™ê¸° ìš”ì²­ì— ëŒ€í•œ ì½”ë“œë¥¼ ì‰½ê²Œ ìœ ì§€í•  ìˆ˜ ìˆë„ë¡ ì–´ë–»ê²Œ êµ¬ì¡°í™”í•˜ê³  ê´€ë¦¬í•  ê²ƒì¸ê°€?
>
> ì´ ì¥ì—ì„œëŠ” íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ë¹„ë™ê¸° ìš”ì²­ì„ ì–´ë–»ê²Œ ì²˜ë¦¬í•˜ê³  ê´€ë¦¬í•˜ëŠ”ì§€ë¥¼ ë‹¤ë¤„ë³¼ ì˜ˆì •ì…ë‹ˆë‹¤.

## 07.1 API ìš”ì²­

### 1. fetchë¡œ API ìš”ì²­í•˜ê¸°

- fetchë¥¼ í•˜ë“œì½”ë”©ìœ¼ë¡œ ì‘ì„±í•˜ë©° ìˆ˜ì •ì‚¬í•­ì´ë‚˜ ìƒˆë¡œìš´ APIìš”ì²­ ì •ì±…ì´ ì¶”ê°€ë  ë•Œë§ˆë‹¤ í•˜ë“œì½”ë”©ëœ ë¹„ë™ê¸° ì½”ë“œë¥¼ ë³€ê²½í•´ì•¼í•˜ëŠ” ì·¨ì•½ì ê³¼ ë²ˆê±°ë¡œì›€ì„ ì„¤ëª…í•˜ê³  ìˆìŒ

### 2. ì„œë¹„ìŠ¤ ë ˆì´ì–´ë¡œ ë¶„ë¦¬í•˜ê¸°

- API ìš”ì²­ ì •ì±…ì´ ì¶”ê°€ë˜ì–´ ì½”ë“œê°€ ë³€ê²½ë  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ê°ì•ˆí•œë‹¤ë©´, ë¹„ë™ê¸° í˜¸ì¶œ ë¡œì§ì€ ì»´í¬ë„ŒíŠ¸ ì˜ì—­ì—ì„œ ë¶„ë¦¬ë˜ì–´ ë‹¤ë¥¸ ì˜ì—­(ì„œë¹„ìŠ¤ ë ˆì´ì–´)ì—ì„œ ì²˜ë¦¬ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
- ê·¸ëŸ¬ë‚˜ ë‹¨ìˆœíˆ í•¨ìˆ˜ë¥¼ ë¶„ë¦¬í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œëŠ” ì¶”ê°€ì •ì±…ì„ í•´ê²°í•˜ê±°ë‚˜ ì¿¼ë¦¬ ë§¤ê°œë³€ìˆ˜ ê·¸ë¦¬ê³  í—¤ë” ì¶”ê°€ ë˜ëŠ” ì¿ í‚¤ë¥¼ ì½ì–´ í† í°ì„ ì§‘ì–´ë„£ëŠ” ë“± ë‹¤ì–‘í•œ APIì •ì±…ì„ ëª¨ë‘ êµ¬í˜„í•˜ëŠ” ê²ƒì€ ë²ˆê±°ë¡œìš´ ì¼ì…ë‹ˆë‹¤.

### 3. Axiosí™œìš©í•˜ê¸°

- ë‚´ì¥ ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ fetchë¥¼ ì‚¬ìš©í•´ë„ ë˜ì§€ë§Œ, ê¸°ëŠ¥êµ¬í˜„í•˜ê¸°ì—” ë²ˆê±°ë¡œìš°ë‹ˆê¹Œ Axiosë¥¼ ì‚¬ìš©í•©ì‹œë‹¤!

  ```ts
  export const apiRequester: AxiosInstance = axios.create({
    baseURL: "https://api.baemin.com",
    timeout: 5000,
  });

  export const fetchCart = (): AxiosPromise<FetchCartResponse> =>
    apiRequester.get<FetchCartResponse>("cart");

  export const postCart = (
    postCartRequest: PostCartRequest
  ): AxiosPromise<PostCartResponse> =>
    apiRequester.post<PostCartResponse>("cart", postCartRequest);
  ```

  - ê° ì„œë²„ê°€ ë‹´ë‹¹í•˜ëŠ” ë¶€ë¶„ì´ ë‹¤ë¥´ê±°ë‚˜ ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ì˜ ì¼ë¶€ë¡œ í¬í•¨ë  ëŒ€ ê¸°ì¡´ì— ì‚¬ìš©í•˜ëŠ” ì˜µì…˜ê°’ê³¼ëŠ” ë‹¤ë¥¸ ìƒˆë¡œìš´ URLë¡œ ìš”ì²­í•´ì•¼ í•˜ëŠ” ìƒí™©ì´ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  - ì´ëŸ´ë•Œì—ëŠ” ì•„ë˜ ì˜ˆì‹œí™” ê°™ì´ ê° ì„œë²„ì˜ ê¸°ë³¸ URLì„ í˜¸ì¶œí•˜ë„ë¡ 2ê°œ ì´ìƒì˜ APIìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë”°ë¡œ êµ¬ì„±í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.

    ```ts
    import axios, { AxiosInstance } from "axios";

    const defaultConfig = {};

    const apiRequester: AxiosInstance = axios.create(defaultConfig);
    const orderApiRequester: AxiosInstance = axios.create({
      baseURL: "https://api.baemin.or/",
      ...defaultConfig,
    });
    const orderCartApiRequester: AxiosInstance = axios.create({
      baseURL: "https://cart.baemin.order/",
      ...defaultConfig,
    });
    ```

### 4. Axios ì¸í„°ì…‰í„° ì‚¬ìš©í•˜ê¸°

- ê°ê°ì˜ requester ì¸ìŠ¤í„´ìŠ¤ëŠ” ì„œë¡œ ë‹¤ë¥¸ ì—­í• ì„ ë‹´ë‹¹í•˜ëŠ” ë‹¤ë¥¸ ì„œë²„ì´ê¸° ë•Œë¬¸ì— ê° ì¸ìŠ¤í„´ìŠ¤ë³„ë¡œ ë‹¤ë¥¸ í—¤ë”ê°’ì„ ì„¤ì •í•´ì¤˜ì•¼ í•˜ëŠ” ë¡œì§ì´ í•„ìš”í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

  - ì´ë•Œ ì¸í„°ì…‰í„° ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì—¬ requesterì— ë”°ë¼ ë¹„ë™ê¸° í˜¸ì¶œ ë‚´ìš©ì„ ì¶”ê°€í•´ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  - ë˜ API ì—ëŸ¬ì²˜ë¦¬ì—ì„œ í•˜ë‚˜ì˜ ì—ëŸ¬ ê°ì²´ë¡œ ë¬¶ì–´ì„œ ì²˜ë¦¬í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

    ```ts
    import axios, {
      AxiosInstance,
      AxiosRequestConfig,
      AxiosResponse,
    } from "axios";

    const getUserToken = () => "";
    const getAgent = () => "";
    const getOrderClientToken = () => "";
    const orderApiBaseUrl = "";
    const orderCartApiBaseUrl = "";
    const defaultConfig = {};
    const httpErrorHandler = () => {};

    const apiRequester: AxiosInstance = axios.create({
      baseURL: "https://api.baemin.com",
      timeout: 5000,
    });

    const setRequestDefaultHeader = (requestConfig: AxiosRequestConfig) => {
      const config = requestConfig;
      config.headers = {
        ...config.headers,
        "Content-Type": "application/json;charset=utf-8",
        user: getUserToken(),
        agent: getAgent(),
      };
      return config;
    };

    const setOrderRequestDefaultHeader = (
      requestConfig: AxiosRequestConfig
    ) => {
      const config = requestConfig;
      config.headers = {
        ...config.headers,
        "Content-Type": "application/json;charset=utf-8",
        "order-client": getOrderClientToken(),
      };
      return config;
    };

    // `interceptors` ê¸°ëŠ¥ì„ ì‚¬ìš©í•´ headerë¥¼ ì„¤ì •í•˜ëŠ” ê¸°ëŠ¥ì„ ë„£ê±°ë‚˜ ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤
    apiRequester.interceptors.request.use(setRequestDefaultHeader);
    const orderApiRequester: AxiosInstance = axios.create({
      baseURL: orderApiBaseUrl,
      ...defaultConfig,
    });
    // ê¸°ë³¸ apiRequesterì™€ëŠ” ë‹¤ë¥¸ headerë¥¼ ì„¤ì •í•˜ëŠ” `interceptors`
    orderApiRequester.interceptors.request.use(setOrderRequestDefaultHeader);
    // `interceptors`ë¥¼ ì‚¬ìš©í•´ httpError ê°™ì€ API ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•  ìˆ˜ë„ ìˆë‹¤
    orderApiRequester.interceptors.response.use(
      (response: AxiosResponse) => response,
      httpErrorHandler
    );
    const orderCartApiRequester: AxiosInstance = axios.create({
      baseURL: orderCartApiBaseUrl,
      ...defaultConfig,
    });
    orderCartApiRequester.interceptors.request.use(setRequestDefaultHeader);
    ```

    > ê·¸ëƒ¥ ì¸ìŠ¤í„´ìŠ¤ ë³„ë¡œ ì¸í„°ì…‰í„°ë¡œ ì•Œë§ëŠ” í—¤ë”ê°’ ì£¼ì…í•´ì£¼ëŠ” ë‚´ìš©ì´ë„¤ìš”

  - ì´ì™€ ë‹¬ë¦¬ ìš”ì²­ ì˜µì…˜ì— ë”°ë¼ ë‹¤ë¥¸ ì¸í„°ì…‰í„°ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ë¹Œë” íŒ¨í„´ì„ ì¶”ê°€í•˜ì—¬ `APIBuilder`ê°™ì€ í´ë˜ìŠ¤ í˜•íƒœë¡œ êµ¬ì„±í•˜ê¸°ë„ í•©ë‹ˆë‹¤.

    > ì•„í•˜ëª¨ë¨¼íŠ¸ ğŸ˜‡
    > ë¹Œë”íŒ¨í„´ì€ ê°ì²´ ìƒì„±ì„ ë” í¸ë¦¬í•˜ê³  ê°€ë…ì„± ìˆê²Œ ë§Œë“¤ê¸° ìœ„í•œ ë””ìì¸ íŒ¨í„´ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. ì£¼ë¡œ ë³µì¡í•œ ê°ì²´ì˜ ìƒì„±ì„ ë‹¨ìˆœí™”í•˜ê³ , ê°ì²´ ìƒì„± ê³¼ì •ì„ ë¶„ë¦¬í•˜ì—¬ ê°ì²´ë¥¼ ì¡°ë¦½í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤.

    ```ts
    import axios, { AxiosPromise } from "axios";

    // ì„ì‹œ íƒ€ì´í•‘
    export type HTTPMethod = "GET" | "POST" | "PUT" | "DELETE";

    export type HTTPHeaders = any;

    export type HTTPParams = unknown;

    //
    class API {
      readonly method: HTTPMethod;
      readonly url: string;
      baseURL?: string;
      headers?: HTTPHeaders;
      params?: HTTPParams;
      data?: unknown;
      timeout?: number;
      withCredentials?: boolean;

      constructor(method: HTTPMethod, url: string) {
        this.method = method;
        this.url = url;
      }

      call<T>(): AxiosPromise<T> {
        const http = axios.create();

        // ë§Œì•½ `withCredential`ì´ ì„¤ì •ëœ APIë¼ë©´ ì•„ë˜ ê°™ì´ ì¸í„°ì…‰í„°ë¥¼ ì¶”ê°€í•˜ê³ , ì•„ë‹ˆë¼ë©´ ì¸í„°ì…‰í„° ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
        if (this.withCredentials) {
          http.interceptors.response.use(
            (response) => response,
            (error) => {
              if (error.response && error.response.status === 401) {
                /* ì—ëŸ¬ ì²˜ë¦¬ ì§„í–‰ */
              }
              return Promise.reject(error);
            }
          );
        }
        return http.request({ ...this });
      }
    }

    export default API;
    ```

    - ì´ì²˜ëŸ¼ ê¸°ë³¸ API í´ë˜ìŠ¤ë¡œ ì‹¤ì œ í˜¸ì¶œ ë¶€ë¶„ì„ êµ¬ì„±í•˜ê³ , ìœ„ì™€ ê°™ì€ APIë¥¼ í˜¸ì¶œí•˜ê¸° ìœ„í•œ Wrapperë¥¼ ë¹Œë” íŒ¨í„´ìœ¼ë¡œ ë§Œë“­ë‹ˆë‹¤.

    ```ts
    import API, { HTTPHeaders, HTTPMethod, HTTPParams } from "./7.1.4-2";

    const apiHost = "";

    class APIBuilder {
      private _instance: API;

      constructor(method: HTTPMethod, url: string, data?: unknown) {
        this._instance = new API(method, url);
        this._instance.baseURL = apiHost;
        this._instance.data = data;
        this._instance.headers = {
          "Content-Type": "application/json; charset=utf-8",
        };
        this._instance.timeout = 5000;
        this._instance.withCredentials = false;
      }

      static get = (url: string) => new APIBuilder("GET", url);

      static put = (url: string, data: unknown) =>
        new APIBuilder("PUT", url, data);

      static post = (url: string, data: unknown) =>
        new APIBuilder("POST", url, data);

      static delete = (url: string) => new APIBuilder("DELETE", url);

      baseURL(value: string): APIBuilder {
        this._instance.baseURL = value;
        return this;
      }

      headers(value: HTTPHeaders): APIBuilder {
        this._instance.headers = value;
        return this;
      }

      timeout(value: number): APIBuilder {
        this._instance.timeout = value;
        return this;
      }

      params(value: HTTPParams): APIBuilder {
        this._instance.params = value;
        return this;
      }

      data(value: unknown): APIBuilder {
        this._instance.data = value;
        return this;
      }

      withCredentials(value: boolean): APIBuilder {
        this._instance.withCredentials = value;
        return this;
      }

      build(): API {
        return this._instance;
      }
    }

    export default APIBuilder;
    ```

    - ìœ„ APIBuilderë¥¼ ì‚¬ìš©í•˜ëŠ” ì˜ˆì‹œì½”ë“œë„ ê°™ì´ ë³´ê² ìŠµë‹ˆë‹¤.

    ```ts
    import APIBuilder from "./7.1.4-3";

    // ex
    type Response<T> = { data: T };
    type JobNameListResponse = string[];

    const fetchJobNameList = async (name?: string, size?: number) => {
      const api = APIBuilder.get("/apis/web/jobs")
        .withCredentials(true) // ì´ì œ 401 ì—ëŸ¬ê°€ ë‚˜ëŠ” ê²½ìš°, ìë™ìœ¼ë¡œ ì—ëŸ¬ë¥¼ íƒì§€í•˜ëŠ” ì¸í„°ì…‰í„°ë¥¼ ì‚¬ìš©í•˜ê²Œ ëœë‹¤
        .params({ name, size }) // bodyê°€ ì—†ëŠ” axios ê°ì²´ë„ ë¹Œë” íŒ¨í„´ìœ¼ë¡œ ì‰½ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤
        .build();
      const { data } = await api.call<Response<JobNameListResponse>>();
      return data;
    };
    ```

    - í•´ë‹¹ íŒ¨í„´ì€ ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œê°€ ë§ë‹¤ëŠ” ë‹¨ì ì„ ê°–ê³ ìˆì§€ë§Œ ì˜µì…˜ì´ ë‹¤ì–‘í•œ ê²½ìš° ì¸í„°ì…‰í„°ë¥¼ ì„¤ì •ê°’ì— ë”°ë¼ ì ìš©í•˜ê³ , í•„ìš” ì—†ëŠ” ì¸í„°ì…‰í„°ëŠ” ì„ íƒì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ë„ ê°–ê³ ìˆìŠµë‹ˆë‹¤.

### 5. API ì‘ë‹µ íƒ€ì… ì§€ì •í•˜ê¸°

- ê°™ì€ ì„œë²„ì—ì„œ ì˜¤ëŠ” ResponseëŠ” ëŒ€ì²´ë¡œ ì¼ê´€ëœ êµ¬ì¡°ë¡œ ë˜ì–´ìˆìœ¼ë¯€ë¡œ í•˜ë‚˜ì˜ íƒ€ì…ìœ¼ë¡œ ë¬¶ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  ```ts
  export interface Response<T> {
    data: T;
    status: string;
    serverDateTime: string;
    errorCode?: string; // FAIL, ERROR
    errorMessage?: string; // FAIL, ERROR
  }

  const fetchCart = (): AxiosPromise<Response<FetchCartResponse>> =>
    apiRequester.get<Response<FetchCartResponse>>("cart");

  const postCart = (
    postCartRequest: PostCartRequest
  ): AxiosPromise<Response<PostCartResponse>> =>
    apiRequester.post<Response<PostCartResponse>>("cart", postCartRequest);
  ```

  - ì´ì™€ ê°™ì´ ì„œë²„ì—ì„œ ì‘ë‹µì„ í†µì¼í•´ì¤„ ë•Œ ì£¼ì˜í•  ì ì´ ìˆìŠµë‹ˆë‹¤. - Response íƒ€ì…ì„ apiRequester ë‚´ì—ì„œ ì²˜ë¦¬í•˜ê³  ì‹¶ì€ ìƒê°ì´ ë“¤ ìˆ˜ ìˆëŠ”ë°, ì´ë ‡ê²Œ í•˜ë©´ UPDATEë‚˜ CREATEê°™ì´ ì‘ë‹µì´ ì—†ì„ ìˆ˜ ìˆëŠ” APIë¥¼ ì²˜ë¦¬í•˜ê¸° ê¹Œë‹¤ë¡œì›Œ ì§‘ë‹ˆë‹¤.
    ```ts
    const updateCart = (
      updateCartRequest: unknown
    ): AxiosPromise<Response<FetchCartResponse>> => apiRequester.get("cart");
    ```
    - ë”°ë¼ì„œ Response íƒ€ì…ì€ apiRequesterê°€ ëª¨ë¥´ê²Œ ê´€ë¦¬ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

### 6. ë·° ëª¨ë¸(View Model) ì‚¬ìš©í•˜ê¸°

- API ì‘ë‹µì€ ë³€í•  ê°€ëŠ¥ì„±ì´ í½ë‹ˆë‹¤. íŠ¹íˆ ì„œë²„ ìŠ¤í™ì´ ìì£¼ ë°”ë€”ìˆ˜ ìˆëŠ” í™˜ê²½ì—ì„œëŠ” ë·°ëª¨ë¸ì„ ì‚¬ìš©í•˜ì—¬ API ë³€ê²½ì— ë”°ë¥¸ ë²”ìœ„ë¥¼ í•œì •í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.
- í”íˆ ì¢‹ì€ ì»´í¬ë„ŒíŠ¸ëŠ” ë³€ê²½ë  ì´ìœ ê°€ í•˜ë‚˜ë¿ì¸ ì»´í¬ë„ŒíŠ¸ë¼ê³  ë§í•©ë‹ˆë‹¤. APIë¥¼ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ìˆ˜ì •ì‚¬í•­ì´ ìƒê¸´ë‹¤ë©´ ê¸°ì¡´ ì»´í¬ë„ŒíŠ¸ë“¤ë„ ëª¨ë‘ ìˆ˜ì •í•´ì•¼ í•˜ëŠ” ìƒí™©ì´ ë°œìƒí•˜ê³¤ í•©ë‹ˆë‹¤.
- ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë·° ëª¨ë¸ì„ ë„ì…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  ```ts
  // ê¸°ì¡´ ListResponseì— ë” ìì„¸í•œ ì˜ë¯¸ë¥¼ ë‹´ê¸° ìœ„í•œ ë³€í™”
  interface JobListItemResponse {
    name: string;
  }

  interface JobListResponse {
    jobItems: JobListItemResponse[];
  }

  class JobList {
    readonly totalItemCount: number;
    readonly items: JobListItemResponse[];
    constructor({ jobItems }: JobListResponse) {
      this.totalItemCount = jobItems.length;
      this.items = jobItems;
    }
  }

  const fetchJobList = async (
    filter?: ListFetchFilter
  ): Promise<JobListResponse> => {
    const { data } = await api
      .params({ ...filter })
      .get("/apis/get-list-summaries")
      .call<Response<JobListResponse>>();

    return new JobList(data);
  };
  ```

  - ë·° ëª¨ë¸ì„ ë§Œë“¤ë©´ API ì‘ë‹µì´ ë³€ê²½ë˜ì–´ë„ UIê°€ ê¹¨ì§€ì§€ ì•Šë„ë¡ ê°œë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ë„ë©”ì¸ ê°œë…ì„ ì¶”ê°€ êµ¬ì„±í•˜ê±°ë‚˜ ë°±ì—”ë“œ í˜¹ì€ UIì—ì„œ ë¡œì§ì„ ì¶”ê°€í•˜ì—¬ ì²˜ë¦¬í•  í•„ìš” ì—†ì´ ê°„í¸í•˜ê²Œ ìƒˆë¡œìš´ í•„ë“œë¥¼ ë·° ëª¨ë¸ì— ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  - ê·¸ëŸ¬ë‚˜ ë·° ëª¨ë¸ ë°©ì‹ì—ì„œë„ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    - ì¶”ìƒí™” ë ˆì´ì–´ ì¶”ê°€ëŠ” ê²°êµ­ ì½”ë“œë¥¼ ë³µì¡í•˜ê²Œ ë§Œë“¤ë©° ë ˆì´ì–´ë¥¼ ê´€ë¦¬í•˜ê³  ê°œë°œí•˜ëŠ” ë°ë„ ë¹„ìš©ì´ ë“­ë‹ˆë‹¤.
      > ì €í¬ëŠ” ê·¸ë˜ì„œ ë·°ëª¨ë¸ ë ˆì´ì–´ë¥¼ êµ¬ì„±í•˜ì§€ ì•Šê³  serverFnì—ì„œ ì§ì ‘ ì²˜ë¦¬í•´ì„œ í”„ë¡ íŠ¸ë¡œ ë°›ëŠ” êµ¬ì¡°ë¥¼ ì·¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.
      > í•˜ì§€ë§Œ ì–¸ì  ê°€ëŠ” ë·°ëª¨ë¸ (custom hook)ì„ ì‚¬ìš©í•˜ê²Œ ë  ë‚ ì´ ì˜¬ê±°ê°™ê¸´ í•´ìš”
    - ë‹¨ìˆœíˆ API 20ê°œë¥¼ ì‚¬ìš©í•œë‹¤ë©´ 20ê°œì˜ ì‘ë‹µì´ ì¶”ê°€ë  ê²ƒì…ë‹ˆë‹¤. ì´ ë§ì€ 20ê°œ ì´ìƒì˜ ë·° ëª¨ë¸ì´ ì¶”ê°€ë  ìˆ˜ ìˆë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤.
  - ê²°êµ­ API ì‘ë‹µì´ ë³€ê²½ë˜ëŠ” ìƒí™©ì—ì„œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ëŠ”ë° ë“¤ì–´ê°€ëŠ” ë¹„ìš©ì„ ì¤„ì´ë©´ì„œë„ ë„ë©”ì¸ ì¼ê´€ì„±ì„ ì§€í‚¬ ìˆ˜ ìˆëŠ” ì ˆì¶©ì•ˆì„ ì°¾ì•„ì•¼ í•©ë‹ˆë‹¤.
    - ê¼­ í•„ìš”í•œ ê³³ì—ë§Œ ë·° ëª¨ë¸ì„ ë¶€ë¶„ì ìœ¼ë¡œ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•˜ê¸°!!!!
    - ë°±ì—”ë“œì™€ í´ë¼ì´ì–¸íŠ¸ ê°œë°œìì˜ ì˜ì‚¬ì†Œí†µ!!!!!!

> ì•„í•˜ëª¨ë¨¼íŠ¸ ğŸ˜‡
> Reactì— ê°€ì¥ ì í•©í•œ ë””ìì¸íŒ¨í„´ì´ MVVMì´ë¼ê³  í•©ë‹ˆë‹¤
> ë·°ëª¨ë¸(ì»¤ìŠ¤í…€í›…)ì´ ë°ì´í„° ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê³ , viewì—ì„œ ì´ë¥¼ ë³´ì—¬ì£¼ëŠ” ë°©ì‹ì´ë¼ ë‹¨ë°©í–¥ ë°ì´í„° íë¦„ê³¼ ì—­í• ì´ ëª…í™•íˆ êµ¬ë¶„ë˜ì–´ìˆëŠ” íŒ¨í„´ì´ë¼ê³  í• ìˆ˜ìˆì£ .
> ì˜ˆì‹œì—ì„œë„ ì¶”ìƒë ˆì´ì–´ë¥¼ ì–¸ê¸‰í–ˆë“¯ ì»¤ìŠ¤í…€í›…ìœ¼ë¡œ ëª¨ë“ˆí™”í•˜ëŠ”ê²ƒì´ ë™ì¼í•œ ê°œë…ìœ¼ë¡œ ì´í•´ë˜ì—ˆìŠµë‹ˆë‹¤.
> [React Architecture ì •ë¦¬](https://daily-programmers-diary.tistory.com/8)

### 7. Superstructë¥¼ ì‚¬ìš©í•´ ëŸ°íƒ€ì„ì—ì„œ ì‘ë‹µ íƒ€ì… ê²€ì¦í•˜ê¸°

- íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ëŠ” ì •ì  ê²€ì‚¬ ë„êµ¬ë¡œ ëŸ°íƒ€ì„ì—ì„œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ëŠ” ì°¾ì•„ë‚¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ëŸ°íƒ€ì„ì— API ì‘ë‹µì˜ ì˜¤ë¥˜ë¥¼ ë°©ì§€í•˜ë ¤ë©´ Superstruct ê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.
- ëŸ°íƒ€ì„ ì‘ë‹µ íƒ€ì… ê²€ì¦ì„ í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” Superstruct ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì†Œê°œí•˜ê² ìŠµë‹ˆë‹¤.
  - Superstructë¥¼ ì‚¬ìš©í•˜ì—¬ ì¸í„°í˜ì´ìŠ¤ ì •ì˜ì™€ ìë°”ìŠ¤í¬ë¦½íŠ¸ ë°ì´í„°ì˜ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ì‰½ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  - SuperstructëŠ” ëŸ°íƒ€ì„ì—ì„œì˜ ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬ë¥¼ í†µí•´ ê°œë°œìì™€ ì‚¬ìš©ìì—ê²Œ ìì„¸í•œ ëŸ°íƒ€ì„ ì—ëŸ¬ë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•´ ê³ ì•ˆë˜ì—ˆìŠµë‹ˆë‹¤.
- ê°„ë‹¨í•˜ê²Œ Superstruct ì‚¬ìš© ë°©ë²•ì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

  ```ts
  import {
    assert,
    is,
    validate,
    object,
    number,
    string,
    array,
  } from "superstruct";

  const Article = object({
    id: number(),
    title: string(),
    tags: array(string()),
    author: object({
      id: number(),
    }),
  });

  const data = {
    id: 34,
    title: "Hello World",
    tags: ["news", "features"],
    author: {
      id: 1,
    },
  };

  assert(data, Article);
  is(data, Article);
  validate(data, Article);
  ```

  > Superstruct ë‚´ìš©ì€ zodë¥¼ ì‚¬ìš©í•œ ê²½í—˜ê³¼ ë™ì¼í•œê²ƒ ê°™ì•„ì„œ ê°€ë³ê²Œ ë„˜ì–´ê°”ìŠµë‹ˆë‹¤.
  > [whats_your_experience_with_superstruct](https://www.reddit.com/r/typescript/comments/1kaibjf/whats_your_experience_with_superstruct/)
  > ê¶ê¸ˆí•´ì„œ ì»¤ë®¤ë‹ˆí‹°ë„ ì ê¹ ì°¾ì•„ë³´ê³  ìƒê°ì„ í•´ë³¸ ê²°ê³¼ ì €ëŠ” ì•ìœ¼ë¡œë„ zodë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‘ì—…ì„ í•˜ê²Œë ê±°ê°™ì•„ìš”.
  > zodì—ì„œ ë§ì€ ê¸°ëŠ¥ì„ ì œê³µí•˜ê³  ëª¨ë“  ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ëŠ” ì—†ë‹¤ê³  í•´ë„ í¸ì˜ì„±ê³¼ í™•ì¥ì„±ì„ ê³ ë ¤í•œë‹¤ë©´ zodìª½ì´ í›¨ì”¬ ìš°ìˆ˜í•œ ê²ƒ ê°™ê³ , superstruct ëŒ€ë¹„ ê±°ëŒ€í•œ ëª¨ë“ˆì‚¬ì´ì¦ˆì™€ zodê°€ ì œê³µí•˜ëŠ” ëª¨ë“  ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ê³  í•´ë„, zod minië¼ëŠ” ì„ íƒì§€ ë˜í•œ ìˆê¸°ì— superstructë¥¼ ê³ ë ¤í•  ìš”ì†Œê°€ ì—†ë‹¤ê³  ê²°ë¡ ì§€ì—ˆìŠµë‹ˆë‹¤.

## 07.2 API ìƒíƒœ ê´€ë¦¬í•˜ê¸°

- ì‹¤ì œ APIë¥¼ ìš”ì²­í•˜ëŠ” ì½”ë“œëŠ” ì»´í¬ë„ŒíŠ¸ ë‚´ì—ì„œ ë¹„ë™ê¸° í•¨ìˆ˜ë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤.
- APIì˜ ì„±ê³µ ì‹¤íŒ¨ì— ë”°ë¥¸ ìƒíƒœê°€ ê´€ë¦¬ë˜ì–´ì•¼ í•˜ë¯€ë¡œ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ acitonì´ë‚˜ hookê³¼ ê°™ì´ ì¬ì •ì˜ëœ í˜•íƒœë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

### 1. ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ í˜¸ì¶œí•˜ê¸°

### 2. í›…ìœ¼ë¡œ í˜¸ì¶œí•˜ê¸°

- ì• ë‚´ìš©ì€ ì•Œê³ ìˆë˜ ë‚´ìš©ì´ë¼ ê°€ë³ê²Œ ì§€ë‚˜ê°”ìŠµë‹ˆë‹¤.

> ë²ˆì™¸ë¡œ queryClient.invalidQuery ë“± return ê°’ì´ ì—†ëŠ” ì²˜ë¦¬ë¥¼ ì§„í–‰í• ë•Œì—ëŠ” í•¨ìˆ˜ ì•ì— voidë¥¼ ëª…ì‹œí•´ì£¼ëŠ”ê²Œ ì¢‹ì€ê²ƒ ê°™ë‹¤ëŠ” ê°œì¸ì ì¸ ìƒê°ì´ ë“­ë‹ˆë‹¤.

> ì•„ë§ˆëª¨ë¨¼íŠ¸ ğŸ˜‡
> í´ë§ (polling)
> í´ë¼ì´ì–¸íŠ¸ê°€ ì£¼ê¸°ì ìœ¼ë¡œ ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚´ ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ê²ƒ ì…ë‹ˆë‹¤.
> í´ë¼ì´ì–¸íŠ¸ëŠ” ì¼ì •í•œ ì‹œê°„ ê°„ê²©ìœ¼ë¡œ ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚´ê³ , ì„œë²„ëŠ” í•´ë‹¹ ìš”ì²­ì— ëŒ€í•´ ìµœì‹  ìƒíƒœì˜ ë°ì´í„°ë¥¼ ì‘ë‹µìœ¼ë¡œ ë³´ë‚´ì£¼ëŠ” ë°©ì‹ì„ ì´ì•¼ê¸°í•©ë‹ˆë‹¤.

> ì„œë²„ì—ì„œ ìŠ¤ì¼€ì¥´ëŸ¬ë¡œ í´ë¼ì´ì–¸íŠ¸ë¡œ ì§€ì†ì ì¸ ê°’ì„ ë³´ë‚´ì£¼ëŠ”ê²ƒê³¼ í´ë§ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì§€ì†ì ìœ¼ë¡œ ì„œë²„ë¥¼ í˜¸ì¶œí•˜ëŠ”ê²ƒ ë“± ë‹¤ì–‘í•œ ì²˜ë¦¬ë°©ë²•ì´ ìˆëŠ”ê²ƒ ê°™ë„¤ìš”

```tsx
const JobList: React.FC = () => {
  // ë¹„ë™ê¸° ë°ì´í„°ë¥¼ í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìì²´ ìƒíƒœë¡œ ì €ì¥
  const {
    isLoading,
    isError,
    error,
    refetch,
    data: jobList,
  } = useFetchJobList();

  // ê°„ë‹¨í•œ Polling ë¡œì§, ì‹¤ì‹œê°„ìœ¼ë¡œ í™”ë©´ì´ ê°±ì‹ ë¼ì•¼ í•˜ëŠ” ìš”êµ¬ê°€ ì—†ì–´ì„œ // 30ì´ˆ ê°„ê²©ìœ¼ë¡œ ê°±ì‹ í•œë‹¤
  useInterval(() => refetch(), 30000);

  // Loadingì¸ ê²½ìš°ì—ë„ í™”ë©´ì— í‘œì‹œí•´ì¤€ë‹¤
  if (isLoading) return <LoadingSpinner />;

  // Errorì— ê´€í•œ ë‚´ìš©ì€ 11.3 API ì—ëŸ¬ í•¸ë“¤ë§ì—ì„œ ë” ìì„¸í•˜ê²Œ ë‹¤ë£¬ë‹¤
  if (isError) return <ErrorAlert error={error} />;

  return (
    <>
      {jobList.map((job) => (
        <Job job={job} />
      ))}
    </>
  );
};
```

- ìš°ì•„í•œ í˜•ì œë“¤ì—ì„œ ì´ì•¼ê¸°í•˜ëŠ” react-query ë„ì… ì‹œë„ ë‚´ìš©ì´ ìˆëŠ”ê²ƒ ê°™ìŠµë‹ˆë‹¤.
  - ìµœê·¼ ì‚¬ë‚´ì—ì„œë„ Reduxë‚˜ MobXì™€ ê°™ì€ ì „ì—­ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë³€ê²½í•˜ê³ ì í•˜ëŠ” ì‹œë„ê°€ ì´ë£¨ì–´ì§€ê³  ìˆìŠµë‹ˆë‹¤.
  - ì•ì„œ ì–¸ê¸‰í–ˆë‹¤ì‹œí”¼ ìƒíƒœê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œëŠ” ë¹„ë™ê¸° ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” ì½”ë“œê°€ ì ì  ì¶”ê°€ë˜ë©´ ì „ì—­ ìƒíƒœ ê´€ë¦¬ ìŠ¤í† ì–´ê°€ ë¹„ëŒ€í•´ì§€ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
  - ë‹¨ìˆœíˆ ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” ì•¡ì…˜ì´ ì¦ê°€í•˜ëŠ” ê²ƒë¿ë§Œ ì•„ë‹ˆë¼ ì „ì—­ ìƒíƒœ ìì²´ë„ ë³µì¡í•´ì§‘ë‹ˆë‹¤.
  - ì—ëŸ¬ ë°œìƒ, ë¡œë”©ì¤‘ ë“±ê³¼ ê°™ì€ ìƒíƒœëŠ” ì „ì—­ìœ¼ë¡œ ê´€ë¦¬í•  í•„ìš”ê°€ ê±°ì˜ ì—†ìŠµë‹ˆë‹¤.
    - **ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ê°€ ì—ëŸ¬ ìƒíƒœì¸ì§€, ì„±ê³µ ìƒíƒœì¸ì§€ë¥¼ êµ¬ë…í•˜ëŠ” ê²½ìš° ì»´í¬ë„ŒíŠ¸ì˜ ê²°í•©ë„ì™€ ë³µì¡ë„ê°€ ë†’ì•„ì ¸ ìœ ì§€ë³´ìˆ˜ë¥¼ ì–´ë µê²Œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.**

## 07.3 API ì—ëŸ¬ í•¸ë“¤ë§

- ë¹„ë™ê¸° API í˜¸ì¶œì„ í•˜ë‹¤ ë³´ë©´ ìƒíƒœ ì½”ë“œì— ë”°ë¼ 401(invalidate), 404(not found), 500(internal server errro) í˜¹ì€ CORS ì—ëŸ¬ ë“± ë‹¤ì–‘í•œ ì—ëŸ¬ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” ì–´ë–»ê²Œ ì´ëŸ¬í•œ ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•˜ê³  ëª…ì‹œí•  ìˆ˜ ìˆëŠ”ì§€ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤. ë¼ì–í˜¸ìš°

### 1. íƒ€ì… ê°€ë“œ í™œìš©í•˜ê¸°

- Axios ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œëŠ” Axios ì—ëŸ¬ì— ëŒ€í•´ `isAxiosError` ë¼ëŠ” íƒ€ì… ê°€ë“œë¥¼ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤.

  - `isAxiosError` íƒ€ì… ê°€ë“œë¥¼ ì§ì ‘ ì‚¬ìš©í•  ìˆ˜ë„ ìˆì§€ë§Œ, ì„œë²„ ì—ëŸ¬ì„ì„ ëª…í™•í•˜ê²Œ í‘œì‹œí•˜ê³  ì„œë²„ì—ì„œ ë‚´ë ¤ì£¼ëŠ” ì‘ë‹µ ê°ì²´ì— ëŒ€í•´ì„œë„ êµ¬ì²´ì ìœ¼ë¡œ ì •ì˜í•¨ìœ¼ë¡œì¨ ì—ëŸ¬ ê°ì²´ê°€ ì–´ë–¤ ì†ì„±ì„ ê°€ì¡ŒëŠ”ì§€ë¥¼ íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  - ì•„ë˜ì™€ ê°™ì´ ì„œë²„ì—ì„œ ì „ë‹¬í•˜ëŠ” ê³µí†µ ì—ëŸ¬ ê°ì²´ì— ëŒ€í•œ íƒ€ì…ì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  ```ts
  interface ErrorResponse {
    status: string;
    serverDateTime: string;
    errorCode: string;
    errorMessage: string;
  }
  ```

  - Axios ì—ëŸ¬ëŠ” `AxiosError<ErrorResponse>`ë¡œ í‘œí˜„í•  ìˆ˜ ìˆìœ¼ë©° ë‹¤ìŒê³¼ ê°™ì´ íƒ€ì… ê°€ë“œë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  ```ts
  function isServerError(error: unknown): error is AxiosError<ErrorResponse> {
    return axios.isAxiosError(error);
  }
  ```

  - ì‚¬ìš©ì ì •ì˜ íƒ€ì… ê°€ë“œë¥¼ ì •ì˜í•  ë•ŒëŠ” íƒ€ì… ê°€ë“œ í•¨ìˆ˜ì˜ return typeìœ¼ë¡œ **parameterName is Type** í˜•íƒœì˜ **íƒ€ì…ëª…ì œ** ë¥¼ ì •ì˜í•´ì£¼ëŠ”ê²Œ ì¢‹ìŠµë‹ˆë‹¤. ì´ë•Œ **prameterName**ì€ íƒ€ì… ê°€ë“œ í•¨ìˆ˜ì˜ ì‹œê·¸ë‹ˆì²˜ì— í¬í•¨ëœ ë§¤ê°œë³€ìˆ˜ì—¬ì•¼ í•©ë‹ˆë‹¤.

  ```ts
  const onClickDeleteHistoryButton = async (id: string) => {
    try {
      await axios.post("https://....", { id });

      alert("ì£¼ë¬¸ ë‚´ì—­ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
    } catch (error: unknown) {
      if (isServerError(e) && e.response && e.response.data.errorMessage) {
        // ì„œë²„ ì—ëŸ¬ì¼ ë•Œì˜ ì²˜ë¦¬ì„ì„ ëª…ì‹œì ìœ¼ë¡œ ì•Œ ìˆ˜ ìˆë‹¤ setErrorMessage(e.response.data.errorMessage);
        return;
      }
      setErrorMessage(
        "ì¼ì‹œì ì¸ ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”"
      );
    }
  };
  ```

  - íƒ€ì… ê°€ë“œë¥¼ í™œìš©í•˜ë©´ ìœ„ ì½”ë“œì²˜ëŸ¼ ì„œë²„ ì—ëŸ¬ë¥¼ ëª…ì‹œì ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 2. ì—ëŸ¬ ì„œë¸Œí´ë˜ì‹± í•˜ê¸°

- ì‹¤ì œ ìš”ì²­ì„ ì²˜ë¦¬í•  ë•Œ ë‹¨ìˆœí•œ ì„œë²„ ì—ëŸ¬ë„ ë°œìƒí•˜ì§€ë§Œ ì¸ì¦ ì •ë³´ ì—ëŸ¬, ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬, íƒ€ì„ì•„ì›ƒ ì—ëŸ¬ ê°™ì€ ë‹¤ì–‘í•œ ì—ëŸ¬ê°€ ë°œìƒí•˜ê¸°ë„ í•©ë‹ˆë‹¤.
- ì´ë¥¼ ë”ìš± ëª…ì‹œì ìœ¼ë¡œ í‘œì‹œí•˜ê¸° ìœ„í•´ ì„œë¸Œí´ë˜ì‹±ì„ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  > ì„œë¸Œí´ë˜ì‹± Subclassing
  > ê¸°ì¡´(ìƒìœ„ ë˜ëŠ” ë¶€ëª¨) í´ë˜ìŠ¤ë¥¼ í™•ì¥í•˜ì—¬ ìƒˆë¡œìš´(í•˜ìœ„ ë˜ëŠ” ìì‹) í´ë˜ìŠ¤ë¥¼ ë§Œë“œëŠ” ê³¼ì •ì„ ë§í•©ë‹ˆë‹¤.
  > ìƒˆë¡œìš´ í´ë˜ìŠ¤ëŠ” ìƒìœ„ í´ë˜ìŠ¤ì˜ ëª¨ë“  ì†ì„±ê³¼ ë©”ì„œë“œë¥¼ ìƒì†ë°›ì•„ ì‚¬ìš©í•  ìˆ˜ ìˆê³  ì¶”ê°€ì ì¸ ì†ì„±ê³¼ ë©”ì„œë“œë¥¼ ì •ì˜í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

- ì„œë¸Œí´ë˜ì‹±ì„ í™œìš©í•˜ë©´ ì—ëŸ¬ê°€ ë°œìƒí–ˆì„ ë•Œ ì½”ë“œìƒì—ì„œ ì–´ë–¤ ì—ëŸ¬ì¸ì§€ë¥¼ ë°”ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ì—ëŸ¬ ì¸ìŠ¤í„´ìŠ¤ê°€ ë¬´ì—‡ì¸ì§€ì— ë”°ë¼ ì—ëŸ¬ ì²˜ë¦¬ ë°©ì‹ì„ ë‹¤ë¥´ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  ```ts
  class OrderHttpError extends Error {
    private readonly privateResponse: AxiosResponse<ErrorResponse> | undefined;

    constructor(message?: string, response?: AxiosResponse<ErrorResponse>) {
      super(message);
      this.name = "OrderHttpError";
      this.privateResponse = response;
    }

    get response(): AxiosResponse<ErrorResponse> | undefined {
      return this.privateResponse;
    }
  }

  class NetworkError extends Error {
    constructor(message = "") {
      super(message);
      this.name = "NetworkError";
    }
  }

  class UnauthorizedError extends Error {
    constructor(message: string, response?: AxiosResponse<ErrorResponse>) {
      super(message, response);
      this.name = "UnauthorizedError";
    }
  }
  ```

  - Axiosë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´ ì¡°ê±´ì— ë”°ë¼ ì¸í„°ì…‰í„°ì—ì„œ ì í•©í•œ ì—ëŸ¬ ê°ì²´ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  ```ts
  const httpErrorHandler = (
    error: AxiosError<ErrorResponse> | Error
  ): Promise<Error> => {
    let promiseError: Promise<Error>;

    if (axios.isAxiosError(error)) {
      if (Object.is(error.code, "ECONNABORTED")) {
        promiseError = Promise.reject(new TimeoutError());
      } else if (Object.is(error.message, "Network Error")) {
        promiseError = Promise.reject(new NetworkError());
      } else {
        const { response } = error as AxiosError<ErrorResponse>;
        switch (response?.status) {
          case HttpStatusCode.UNAUTHORIZED:
            promiseError = Promise.reject(
              new UnauthorizedError(response?.data.message, response)
            );
            break;
          default:
            promiseError = Promise.reject(
              new OrderHttpError(response?.data.message, response)
            );
        }
      }
    } else {
      promiseError = Promise.reject(error);
    }

    return promiseError;
  };
  ```

  - ì‚¬ìš©ì²˜ì—ì„œëŠ” ì•„ë˜ì™€ ê°™ì´ í™œìš© ê°€ëŠ¥í•©ë‹ˆë‹¤

  ```ts
  const alert = (meesage: string, { onClose }: { onClose?: () => void }) => {};

  const onActionError = (
    error: unknown,
    params?: Omit<AlertPopup, "type" | "message">
  ) => {
    if (error instanceof UnauthorizedError) {
      onUnauthorizedError(
        error.message,
        errorCallback?.onUnauthorizedErrorCallback
      );
    } else if (error instanceof NetworkError) {
      alert("ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì´ ì›í™œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.", {
        onClose: errorCallback?.onNetworkErrorCallback,
      });
    } else if (error instanceof OrderHttpError) {
      alert(error.message, params);
    } else if (error instanceof Error) {
      alert(error.message, params);
    } else {
      alert(defaultHttpErrorMessage, params);
    }

    const getOrderHistory = async (page: number): Promise<History> => {
      try {
        const { data } = await fetchOrderHistory({ page });
        const history = await JSON.parse(data);

        return history;
      } catch (error) {
        onActionError(error);
      }
    };
  };
  ```

  - ì´ì²˜ëŸ¼ ì—ëŸ¬ë¥¼ ì„œë¸Œí´ë˜ì‹±í•´ì„œ í‘œí˜„í•˜ë©´ ëª…ì‹œì ìœ¼ë¡œ ì—ëŸ¬ ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  - `error instanceof OrderHttpError`ì™€ ê°™ì´ ì‘ì„±ëœ íƒ€ì… ê°€ë“œë¬¸ì„ í†µí•´ ì½”ë“œìƒì—ì„œ ì—ëŸ¬ í•¸ë“¤ë¦¬ì— ëŒ€í•œ ë¶€ë¶„ì„ í•œëˆˆì— ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 3. ì¸í„°ì…‰í„°ë¥¼ í™œìš©í•œ ì—ëŸ¬ ì²˜ë¦¬

- Axios ê°™ì€ í˜ì¹­ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì¸í„°ì…‰í„° ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ë¥¼ ì‚¬ìš©í•˜ë©´ HTTP ì—ëŸ¬ì— ì¼ê´€ëœ ë¡œì§ì„ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  ```ts
  const httpErrorHandler = (
    error: AxiosError<ErrorResponse> | Error
  ): Promise<Error> => {
    (error) => {
      // 401 ì—ëŸ¬ì¸ ê²½ìš° ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
      if (error.response && error.response.status === 401) {
        window.location.href = `${backOfficeAuthHost}/login?targetUrl=${window.location.href}`;
      }
      return Promise.reject(error);
    };
  };

  orderApiRequester.interceptors.response.use(
    (response: AxiosResponse) => response,
    httpErrorHandler
  );
  ```

### 4. ì—ëŸ¬ ë°”ìš´ë”ë¦¬ë¥¼ í™œìš©í•œ ì—ëŸ¬ ì²˜ë¦¬

### 5. ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œì˜ ì—ëŸ¬ ì²˜ë¦¬

### 6. react-queryë¥¼ í™œìš©í•œ ì—ëŸ¬ ì²˜ë¦¬

### 7. ê·¸ ë°–ì˜ ì—ëŸ¬ ì²˜ë¦¬

- ë ˆê±°ì‹œì½”ë“œ í˜¹ì€ ëŒ€ì‘í•  ìˆ˜ ì—†ëŠ” ê²½ìš° 200ë²ˆ ëŒ€ì˜ ì„±ê³µ ì‘ë‹µì— ëŒ€í•œ ì—ëŸ¬ì²˜ë¦¬ê°€ í•„ìš”í•œ ìƒí™©ì´ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```ts
httpStatus: 200
{
  "status": "C20005", // ì„±ê³µì¸ ê²½ìš° successë¥¼ ì‘ë‹µ
  "message": "ì¥ë°”êµ¬ë‹ˆì— í’ˆì ˆëœ ë©”ë‰´ê°€ ìˆìŠµë‹ˆë‹¤"
}
```

- í•´ë‹¹ ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ìš”ì²­ í•¨ìˆ˜ ë‚´ì—ì„œ ì¡°ê±´ë¬¸ìœ¼ë¡œ statusë¥¼ ë¹„êµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  ```ts
  const successHandler = (response: CreateOrderResponse) => {
    if (response.status === "SUCCESS") {
      // ì„±ê³µ ì‹œ ì§„í–‰í•  ë¡œì§ì„ ì¶”ê°€í•œë‹¤
      return;
    }
    throw new CustomError(response.status, response.message);
  };
  const createOrder = (data: CreateOrderData) => {
    try {
      const response = apiRequester.post("https://...", data);

      successHandler(response);
    } catch (error) {
      errorHandler(error);
    }
  };
  ```

  - í•´ë‹¹ ë°©ë²•ì„ ì‚¬ìš©í•˜ë©´ ê°„ë‹¨í•˜ê²Œ ì»¤ìŠ¤í…€ ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  - ë˜í•œ ì˜í–¥ ë²”ìœ„ê°€ ê° ìš”ì²­ì— ëŒ€í•œ ì„±ê³µ/ì‹¤íŒ¨ ì‘ë‹µ ì²˜ë¦¬ í•¨ìˆ˜ë¡œ í•œì •ë˜ì–´ ê´€ë¦¬í•˜ê¸° í¸ë¦¬í•´ì§‘ë‹ˆë‹¤.
    - ê·¸ëŸ¬ë‚˜ ì´ë ‡ê²Œ ì²˜ë¦¬í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ë§ì„ ë•Œì—ëŠ” ë§¤ë²ˆ ë™ì¼í•œ êµ¬ë¬¸ êµ¬ì¡°ë¥¼ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.
  - ë§Œì•½ ì»¤ìŠ¤í…€ ì—ëŸ¬ë¥¼ ì‚¬ìš©í•˜ê³  ìˆëŠ” ìš”ì²­ì„ ì¼ê´„ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê³  ì‹¶ë‹¤ë©´ Axios ë“±ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê¸°ëŠ¥ì„ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

    - íŠ¹ì • í˜¸ìŠ¤íŠ¸ì— ëŒ€í•œ API requesterë¥¼ ë³„ë„ë¡œ ì„ ì–¸í•˜ê³  ìƒíƒœ ì½”ë“œë¡œ ë¹„êµ ë¡œì§ì„ ì¸í„°ì…‰í„°ì— ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

      ```ts
      export const apiRequester: AxiosInstance = axios.create({
        baseURL: orderApiBaseUrl,
        ...defaultConfig,
      });

      export const httpSuccessHandler = (response: AxiosResponse) => {
        if (response.data.status !== "SUCCESS") {
          throw new CustomError(response?.data.message, response);
        }

        return response;
      };

      apiRequester.interceptors.response.use(
        httpSuccessHandler,
        httpErrorHandler
      );

      const createOrder = (data: CreateOrderData) => {
        try {
          const response = apiRequester.post("https://...", data);

          successHandler(response);
        } catch (error) {
          // statusê°€ SUCCESSê°€ ì•„ë‹Œ ê²½ìš° ì—ëŸ¬ë¡œ ì „ë‹¬ëœë‹¤
          errorHandler(error);
        }
      };
      ```

## 07.4 API ëª¨í‚¹

- ì•ì˜ ë‚´ìš©ì€ ìƒëµí–ˆìŠµë‹ˆë‹¤.
- ì´ìŠˆê°€ ìƒê²¼ì„ ë•Œ charles ë“±ì˜ ë„êµ¬ë¥¼ í™œìš©í•˜ë©´ ì‘ë‹µ ê°’ì„ ê·¸ëŒ€ë¡œ ë³µì‚¬í•˜ì—¬ ì´ìŠˆ ë°œìƒ ìƒí™©ì„ ì¬í˜„í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.
- ìš°ì•„í•œí˜•ì œë“¤ í”„ë¡ íŠ¸ì—”ë“œì—ì„œëŠ” `axios-mock-adapter`, `NextApiHandler` ë“±ì„ í™œìš©í•˜ì—¬ APIë¥¼ ëª¨í‚¹í•´ì„œ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.

> ìš”ì¦˜ í…ŒìŠ¤íŒ…ì„ ê°„ê°„íˆ ì‘ì„±ì¤‘ì¸ë°, ë¯¸ë“¤ì›¨ì–´ë•Œë¬¸ì— ì„œë¹„ìŠ¤í•¨ìˆ˜ í…ŒìŠ¤íŒ…ì´ ì–´ë ¤ìš´ ìƒí™©ì…ë‹ˆë‹¤. ì¸ì¦ì¸ê°€ë¥¼ ëª¨í‚¹ìœ¼ë¡œ ìš°íšŒí•˜ê¸°ì—ëŠ” ì•„ì§ ì–´ë µë„¤ìš” :(

### 1. JSON íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸°

- ê°„ë‹¨í•œ ì¡°íšŒë§Œ í•„ìš”í•œ ê²½ìš°ì—ëŠ” `*.json` íŒŒì¼ì„ ë§Œë“¤ê±°ë‚˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ ì•ˆì— JSON í˜•ì‹ì˜ ì •ë³´ë¥¼ ì €ì¥í•˜ê³  export í•´ì£¼ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.
- ì´í›„ GET ìš”ì²­ì— íŒŒì¼ ê²½ë¡œë¥¼ ì‚½ì…í•´ì£¼ë©´ ì¡°íšŒ ì‘ë‹µìœ¼ë¡œ ì›í•˜ëŠ” ê°’ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  ```ts
  // mock/service.ts
  const SERVICES: Service[] = [
    {
      id: 0,
      name: "ë°°ë‹¬ì˜ë¯¼ì¡±",
    },
    {
      id: 1,
      name: "ë§Œí™”ê²½",
    },
  ];

  export default SERVICES;

  // api.ts
  const getServices = ApiRequester.get("/mock/service.ts");
  ```

### 2. NextApiHandler í™œìš©í•˜ê¸°

```ts
// api/mock/brand
import { NextApiHandler } from "next";

const BRANDS: Brand[] = [
  {
    id: 1,
    label: "ë°°ë¯¼ìŠ¤í† ì–´",
  },
  {
    id: 2,
    label: "ë¹„ë§ˆíŠ¸",
  },
];

const handler: NextApiHandler = (req, res) => {
  // request ìœ íš¨ì„± ê²€ì¦
  res.json(BRANDS);
};

export default handler;
```

### 3. API ìš”ì²­ í•¸ë“¤ëŸ¬ì— ë¶„ê¸° ì¶”ê°€í•˜ê¸°

- ìš”ì²­ ê²½ë¡œë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³  í‰ì†Œì— ê°œë°œí•  ë–„ í•„ìš”í•œ ê²½ìš°ì—ë§Œ ì‹¤ì œ ìš”ì²­ì„ ë³´ë‚´ê³  ê·¸ ì™¸ì—ëŠ” ëª©ì—…ì„ ì‚¬ìš©í•˜ì—¬ ê°œë°œí•˜ê³  ì‹¶ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- API ìš”ì²­ì„ í›… ë˜ëŠ” ë³„ë„ í•¨ìˆ˜ë¡œ ì„ ì–¸í•´ì¤€ ë‹¤ìŒ ì¡°ê±´ì— ë”°ë¼ ëª©ì—… í•¨ìˆ˜ë¥¼ ë‚´ë³´ë‚´ê±°ë‚˜ ì‹¤ì œ ìš”ì²­ í•¨ìˆ˜ë¥¼ ë‚´ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  ```ts
  const mockFetchBrands = (): Promise<FetchBrandsResponse> =>
    new Promise((resolve) => {
      setTimeout(() => {
        resolve({
          status: "SUCCESS",
          message: null,
          data: [
            {
              id: 1,
              label: "ë°°ë¯¼ìŠ¤í† ì–´",
            },
            {
              id: 2,
              label: "ë¹„ë§ˆíŠ¸",
            },
          ],
        });
      }, 500);
    });

  const fetchBrands = () => {
    if (useMock) {
      return mockFetchBrands();
    }

    return requester.get("/brands");
  };
  ```

  - í•´ë‹¹ ë°©ë²•ì„ ì‚¬ìš©í•˜ë©´ ê°œë°œì´ ì™„ë£Œëœ ì´í›„ì—ë„ ìœ ì§€ë³´ìˆ˜í•  ë•Œ ëª©ì—… í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  - í•„ìš”í•œ ê²½ìš°ì—ë§Œ ì‹¤ì œ APIì— ìš”ì²­ì„ ë³´ë‚´ê³  í‰ì†Œì—ëŠ” ì„œë²„ì— ì˜ì¡´í•˜ì§€ ì•Šê³  ê°œë°œí•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.
  - ê·¸ëŸ¬ë‚˜ ifë¬¸ì´ ê·€ì°¬....

### 4. axios-mock-adapterë¡œ ëª¨í‚¹í•˜ê¸°

- ì„œë¹„ìŠ¤ í•¨ìˆ˜ì— ë¶„ê¸°ë¬¸ì´ ì¶”ê°€ë˜ëŠ” ê²ƒì„ ë°”ë¼ì§€ ì•ŠëŠ”ë‹¤ë©´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.
- í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” Axios ìš”ì²­ì„ ê°€ë¡œì±„ì„œ ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µ ê°’ì„ ëŒ€ì‹  ë°˜í™˜í•©ë‹ˆë‹¤.

  - ë¨¼ì € MockAdapter ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , í•´ë‹¹ ê°ì²´ë¥¼ ì‚¬ìš©í•´ì„œ ëª¨í‚¹í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  - ì•ì„  ë‘ ë°©ë²•ê³¼ëŠ” ë‹¤ë¥´ê²Œ mock APIì˜ ì£¼ì†Œê°€ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì•ì˜ ë°©ë²•ê³¼ ë¹„ìŠ·í•˜ê²Œ ì¡°íšŒ ìš”ì²­ì— ëŒ€í•œ ëª©ì—…ì„ ì‘ì„±í•˜ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

  ```ts
  // mock/index.ts
  import axios from "axios";
  import MockAdapter from "axios-mock-adapter";
  import fetchOrderListSuccessResponse from "fetchOrderListSuccessResponse.json";

  interface MockResult {
    status?: number;
    delay?: number;
    use?: boolean;
  }

  const mock = new MockAdapter(axios, { onNoMatch: "passthrough" });

  export const fetchOrderListMock = () =>
    mock.onGet(/\/order\/list/).reply(200, fetchOrderListSuccessResponse);

  // fetchOrderListSuccessResponse.json
  {
    "data": [
      {
        "orderNo": "ORDER1234", "orderDate": "2022-02-02", "shop": {
        "shopNo": "SHOP1234",
        "name": "ê°€ê²Œì´ë¦„1234" },
        "deliveryStatus": "DELIVERY"
      },
    ]
  }
  ```

  - ë‹¨ìˆœíˆ ì‘ë‹µ ë°”ë””ë§Œ ëª¨í‚¹í•  ìˆ˜ë„ ìˆì§€ë§Œ ìƒíƒœ ì½”ë“œ, ì‘ë‹µ ì§€ì—° ì‹œê°„ ë“±ì„ ì¶”ê°€ë¡œ ì„¤ì •í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

    ```ts
    export const lazyData = (
      status: number = Math.floor(Math.random() * 10) > 0 ? 200 : 200,
      successData: unknown = defaultSuccessData,
      failData: unknown = defaultFailData,
      time = Math.floor(Math.random() * 1000)
    ): Promise<any> =>
      new Promise((resolve) => {
        setTimeout(() => {
          resolve([status, status === 200 ? successData : failData]);
        }, time);
      });

    export const fetchOrderListMock = ({
      status = 200,
      time = 100,
      use = true,
    }: MockResult) =>
      use &&
      mock
        .onGet(/\/order\/list/)
        .reply(() =>
          lazyData(status, fetchOrderListSuccessResponse, undefined, time)
        );
    ```

    - í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ë©´ GETë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ë¥¸ HTTPë©”ì„œë“œì— ëŒ€í•œ ëª©ì—…ì„ ì‘ì„±í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.
    - ë˜í•œ networkError, timeoutErrorë“±ì„ ë©”ì„œë“œë¡œ ì œê³µí•˜ê¸° ë•Œë¬¸ì— ë‹¤ìŒì²˜ëŸ¼ ì„ì˜ë¡œ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¬ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
      ```ts
      export const fetchOrderListMock = () =>
        mock.onPost("/order/list").networkError();
      ```

### 5. ëª©ì—… ì‚¬ìš© ì—¬ë¶€ ì œì–´í•˜ê¸°

```ts
const useMock = Object.is(REACT_APP_MOCK, "true");

const mockFn = ({ status = 200, time = 100, use = true }: MockResult) =>
  use &&
  mock.onGet(/\/order\/list/).reply(
    () =>
      new Promise((resolve) =>
        setTimeout(() => {
          resolve([
            status,
            status === 200 ? fetchOrderListSuccessResponse : undefined,
          ]);
        }, time)
      )
  );

if (useMock) {
  mockFn({ status: 200, time: 100, use: true });
}
```

- íŠ¹ì • í”Œë˜ê·¸ë¥¼ í†µí•´ mockFnì„ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ì‹œ êµ¬ë¶„ì§“ê³ ì í•œë‹¤ë©´ package.jsonì—ì„œ ì„¤ì • ê°€ëŠ¥í•©ë‹ˆë‹¤.

  ```json
  // package.json

  {
    "scripts": {
      "start:mock": "REACT_APP_MOCK=true npm run start",
      "start": "REACT_APP_MOCK=false npm run start"
    }
  }
  ```

- ë˜ëŠ” config íŒŒì¼ì„ ë³„ë„ë¡œ êµ¬ì„±í•˜ê±°ë‚˜ í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
- API ìš”ì²­ì˜ íë¦„ì„ íŒŒì•…í•˜ê³  ì‹¶ë‹¤ë©´ react-query-devtools ê°™ì€ ë³„ë„ì˜ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.
- ëª©ì—…ì„ ì‚¬ìš©í•  ë•Œ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ í™•ì¸í•˜ê³  ì‹¶ì„ ë•Œì—ëŠ” ë„¤íŠ¸ì›Œí¬ì— ë³´ë‚¸ ìš”ì²­ì„ ë³€ê²½í•´ì£¼ëŠ” Cypressê°™ì€ ë„êµ¬ì˜ ì›¹í›…ì„ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.

### Axiosë“± fetch ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ëŒ€í•œ ìš°í˜• ì´ì•¼ê¸°ë¥¼ ì •ë¦¬í•´ë³´ì•˜ì–´ìš”

#### ë°ì´í„° fetching ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ë‚˜ìš”? ì‚¬ìš©í•œë‹¤ë©´ ì–´ë–¤ ê¸°ì¤€ìœ¼ë¡œ ì„ íƒí–ˆë‚˜ìš”? ë˜ ì‚¬ìš©í•˜ê³  ë‚˜ì„œ ëŠë‚€ ì¥ë‹¨ì ì€ ì–´ë–¤ê²Œ ìˆë‚˜ìš”?

- A: ê´€ë¦¬í•˜ëŠ” í”„ë¡œì íŠ¸ì— ë¹„ë™ê¸° ìš”ì²­ì´ ë§ì§€ ì•Šì•„ ì‚¬ìš©í•˜ê³  ìˆì§€ ì•Šë‹¤. í•„ìš”í•œ ê²½ìš° Recoilì—ì„œ ì œê³µí•˜ëŠ” useSelectorë¥¼ í™œìš©í•˜ì—¬ ë°ì´í„° í˜ì¹­ì„ ì²˜ë¦¬í•˜ê³  ìˆìŒ.
- B: react-queryë¥¼ ì‚¬ìš©ì¤‘. "ìƒíƒœê´€ë¦¬"ë¥¼ í•˜ëŠ” ëª©ì ì„ ê³ ë ¤í–ˆì„ë•Œ, ì„œë²„ì—ì„œ ê°€ì ¸ì˜¨ ë°ì´í„° ê´€ë¦¬ ìš©ë„ë¡œ í´ë¼ì´ì–¸íŠ¸ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” MobXë‚˜ Reduxë¥¼ ì‚¬ìš©í•˜ëŠ”ê²Œ ë§ì„ê¹Œ? ë¼ëŠ” ì˜ë¬¸ì´ ìƒê²¨ì„œ ê³ ë¯¼ëì— Reduxë¥¼ ê±·ì–´ë‚´ê²Œ ë¨.
